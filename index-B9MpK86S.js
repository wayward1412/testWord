import{e as m,f as t,g as p,v as c,j as w,k as g,l as y,m as S,o as b,q as f,F as W,t as $,x,b as _,r as k,y as L,d as V,z}from"./@vue-DormXxIY.js";import{c as U,a as E}from"./vue-router-XbbuCTNI.js";import{a as u}from"./axios-BtuGy7By.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function d(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=d(o);fetch(o.href,n)}})();const h=(i,e)=>{const d=i.__vccOpts||i;for(const[r,o]of e)d[r]=o;return d},O={data(){return{username:"",password:""}},methods:{async onSubmit(){try{const i=await u.post("https://zhongzq.top:8443/api/token/pair",{username:this.username,password:this.password});i.data.access?(alert("登录成功"),localStorage.setItem("token",i.data.access),this.$router.push("/wordbook")):alert("登录失败，请检查用户名或密码是否正确！")}catch(i){console.error(i),alert("登录失败，请稍后再试！")}}}},N={class:"login-container"},T={class:"form-group"},A={class:"form-group"},B={class:"register-link"};function I(i,e,d,r,o,n){const s=b("router-link");return f(),m("div",N,[e[8]||(e[8]=t("h1",null,"用户登录",-1)),t("form",{onSubmit:e[2]||(e[2]=w((...l)=>n.onSubmit&&n.onSubmit(...l),["prevent"]))},[t("div",T,[e[3]||(e[3]=t("label",{for:"username"},"用户名",-1)),p(t("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=l=>o.username=l),required:""},null,512),[[c,o.username]])]),t("div",A,[e[4]||(e[4]=t("label",{for:"password"},"密码",-1)),p(t("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=l=>o.password=l),required:""},null,512),[[c,o.password]])]),e[5]||(e[5]=t("button",{type:"submit"},"登录",-1))],32),t("div",B,[e[7]||(e[7]=g(" 没有账号？")),y(s,{to:"/register"},{default:S(()=>e[6]||(e[6]=[g("立即注册")])),_:1})])])}const M=h(O,[["render",I],["__scopeId","data-v-747a4f0f"]]),P={data(){return{username:"",password:"",confirm:"",realname:""}},methods:{async onSubmit(){if(this.password!==this.confirm){alert("两次输入的密码不一致，请重新输入！");return}if(this.password.length<8){alert("密码长度不能小于8位，请重新输入！");return}try{(await u.post("https://zhongzq.top:8443/api/register",{username:this.username,password:this.password,realname:this.realname})).data.success?(alert("注册成功，请登录！"),this.$router.push("/login")):alert("注册失败，请检查用户名或密码是否正确！")}catch(i){console.error(i),alert("注册失败，请稍后再试！")}}}},F={class:"register-container"},R={class:"form-group"},j={class:"form-group"},D={class:"form-group"},H={class:"form-group"},K={class:"login-link"};function G(i,e,d,r,o,n){const s=b("router-link");return f(),m("div",F,[e[12]||(e[12]=t("h1",null,"用户注册",-1)),t("form",{onSubmit:e[4]||(e[4]=w((...l)=>n.onSubmit&&n.onSubmit(...l),["prevent"]))},[t("div",R,[e[5]||(e[5]=t("label",{for:"username"},"用户名",-1)),p(t("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=l=>o.username=l),required:""},null,512),[[c,o.username]])]),t("div",j,[e[6]||(e[6]=t("label",{for:"password"},"密码",-1)),p(t("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=l=>o.password=l),required:""},null,512),[[c,o.password]])]),t("div",D,[e[7]||(e[7]=t("label",{for:"confirm"},"密码确认",-1)),p(t("input",{type:"password",id:"confirm","onUpdate:modelValue":e[2]||(e[2]=l=>o.confirm=l),required:""},null,512),[[c,o.confirm]])]),t("div",H,[e[8]||(e[8]=t("label",{for:"realname"},"真实姓名",-1)),p(t("input",{type:"text",id:"realname","onUpdate:modelValue":e[3]||(e[3]=l=>o.realname=l),required:""},null,512),[[c,o.realname]])]),e[9]||(e[9]=t("button",{type:"submit"},"立即注册",-1))],32),t("div",K,[e[11]||(e[11]=g(" 已有账号？")),y(s,{to:"/login"},{default:S(()=>e[10]||(e[10]=[g("去登录")])),_:1})])])}const J=h(P,[["render",G]]),Q={setup(){const i="https://zhongzq.top:8443/api",e=localStorage.getItem("token");u.interceptors.request.use(a=>(a.headers.Authorization=`Bearer ${e}`,a));const d=_([]),r=k(""),o=k(""),n=_(new Set);L(async()=>{await s()});const s=async()=>{try{const a=await u.get(`${i}/word/list`);d.splice(0,d.length,...a.data)}catch(a){console.error("加载单词列表失败:",a)}};return{wordList:d,searchWord:r,currentExplanation:o,getTranslation:async()=>{try{const a=await u.get(`${i}/translate`,{params:{q:r.value}});o.value=a.data.join(`;
`)}catch(a){console.error("查询失败:",a)}},saveWord:async()=>{if(r.value)try{const a=await u.post(`${i}/word/add?word=${r.value}`),[v]=a.data.filter(q=>q.word===r.value);v&&(v.explanation=o.value,await u.put(`${i}/word/update`,v),await s(),alert("保存成功"))}catch(a){console.error("保存失败:",a),alert("保存失败")}},deleteSelected:async()=>{try{await u.delete(`${i}/word/delete`,{data:Array.from(n)}),await s(),n.clear()}catch(a){console.error("删除失败:",a)}},showWordExplanation:a=>{o.value=a.explanation,r.value=a.word},toggleCheckbox:a=>{n.has(a)?n.delete(a):n.add(a)}}}},X={class:"container"},Y={class:"word-list"},Z=["onClick"],ee=["value","onClick"],te={class:"content-area"},oe={class:"definition-box"},re={class:"button-group"};function se(i,e,d,r,o,n){return f(),m("div",null,[e[4]||(e[4]=t("div",{class:"top-bar"},[t("h2",{style:{color:"#1a73e8",margin:"0"}},"我的单词本")],-1)),t("div",X,[t("div",Y,[(f(!0),m(W,null,$(r.wordList,s=>(f(),m("div",{key:s.id,class:"word-item",onClick:l=>r.showWordExplanation(s)},[t("input",{type:"checkbox",value:s.id,onClick:w(l=>r.toggleCheckbox(s.id),["stop"])},null,8,ee),t("span",null,x(s.word),1)],8,Z))),128))]),t("div",te,[t("div",oe,x(r.currentExplanation||"选择单词查看释义..."),1),t("div",re,[p(t("input",{type:"text",class:"search-input",placeholder:"输入查询单词","onUpdate:modelValue":e[0]||(e[0]=s=>r.searchWord=s)},null,512),[[c,r.searchWord]]),t("button",{class:"query-btn",onClick:e[1]||(e[1]=(...s)=>r.getTranslation&&r.getTranslation(...s))},"查询"),t("button",{class:"save-btn",onClick:e[2]||(e[2]=(...s)=>r.saveWord&&r.saveWord(...s))},"保存"),t("button",{class:"delete-btn",onClick:e[3]||(e[3]=(...s)=>r.deleteSelected&&r.deleteSelected(...s))},"删除选中")])])])])}const ne=h(Q,[["render",se]]),ae={class:"app"},ie=V({__name:"App",setup(i){return(e,d)=>{const r=b("router-view");return f(),m("div",ae,[y(r)])}}}),le=[{path:"/",redirect:"/register"},{path:"/register",component:J},{path:"/login",component:M},{path:"/wordbook",component:ne}],de=U({history:E(),routes:le}),C=z(ie);C.use(de);C.mount("#app");
